/*! step10 2018-04-17 */

function Buttons(){this.on=1;this.update(1);for(var t=1;t<=3;t++)this.configButton(t)}function Simon(t){this.form=$(t);this.state="initial",this.sequence=[],this.sequence.push(Math.floor(4*Math.random())),this.current=0,console.log("Simon started"),this.configureButton(0,"red"),this.configureButton(1,"green"),this.configureButton(2,"blue"),this.configureButton(3,"yellow"),this.play()}Buttons.prototype.configButton=function(t){var e=3==t?1:t+1,o=this;$("#b"+t).click(function(){o.on==t&&o.update(e)})},Buttons.prototype.update=function(t){this.on=t,$("#b1").css("background-color",1==this.on?"red":"green"),$("#b2").css("background-color",2==this.on?"red":"green"),$("#b3").css("background-color",3==this.on?"red":"green"),$("#b1").html(1==this.on?"Press Me":"&nbsp;"),$("#b2").html(2==this.on?"Press Me":"&nbsp;"),$("#b3").html(3==this.on?"Press Me":"&nbsp;")},Simon.prototype.configureButton=function(e,o){var n=$(this.form.find("input").get(e)),s=this;console.log(n),n.click(function(t){s.buttonPress(e,o)}),n.mousedown(function(t){n.css("background-color",o)}),n.mouseup(function(t){n.css("background-color","lightgrey")}),console.log("Set Button: "+e+" Color: "+o)},Simon.prototype.play=function(){this.state="play",this.current=0,this.playCurrent()},Simon.prototype.playCurrent=function(){var t=this;if(this.current<this.sequence.length){var e=["red","green","blue","yellow"];document.getElementById(e[this.sequence[this.current]]).play();var o=$(this.form.find("input").get(this.sequence[this.current])),n=e[this.sequence[this.current]];this.buttonOn(o,n),this.current++,window.setTimeout(function(){t.playCurrent()},1e3)}else this.current=0,this.state="enter"},Simon.prototype.buttonOn=function(t,e){t.css("background-color",e),window.setTimeout(function(){$("input[type=button]").css("background-color","lightgrey")},1e3)},Simon.prototype.buttonPress=function(t,e){var o=this;console.log("Button press: "+t+" Color: "+e),t==this.sequence[this.current]?(console.log("Correct Button!"),document.getElementById(e).currentTime=0,document.getElementById(e).play(),this.current==o.sequence.length-1?(console.log("Sequence completed correctly"),this.current=0,this.sequence.push(Math.floor(4*Math.random())),console.log("Generated New Value"),window.setTimeout(function(){o.play(),console.log("State: "+o.state)},1e3)):(this.current+=1,this.state="enter",console.log("State: "+this.state))):(console.log("Incorrect Button!"),document.getElementById("buzzer").play(),this.state="fail",console.log("State: "+this.state),this.sequence=[],this.sequence.push(Math.floor(4*Math.random())),console.log("Generated New Sequence"),window.setTimeout(function(){o.play(),console.log("State: "+o.state)},1e3))};